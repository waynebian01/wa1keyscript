local auraID2 = 139 --恢复
local RenewCount = 0

local function hasAura(unit, auraID, auraName)
    for j = 1, 40 do
        local auraData = C_UnitAuras.GetAuraDataByIndex(unit, j, "HELPFUL")
        if not auraData then break end
        if (auraData.spellId == auraID and auraData.sourceUnit == "player") or
            (auraData.name == auraName) then
            return true
        end
    end
    return false
end

if UnitPlayerOrPetInRaid("player") then
    for i = 1, 40 do
        local unit = "raid" .. i
        if UnitExists(unit) and not UnitIsDeadOrGhost(unit) and UnitCanAssist("player", unit) and UnitInRange(unit) then
            local hasAura2 = hasAura(unit, auraID2) --恢复
            if hasAura2 then RenewCount = RenewCount + 1 end --统计恢复数量
        end
    end
end

return RenewCount
